import{d as x,r as i,o as R,j as E,a as m,b,e as p,v,A as S,ac as T,ad as D,a6 as P}from"./framework.2729cd3b.js";import{c as B}from"../app.90418f54.js";import"./theme.32b50aae.js";const G={attach:{type:String,default:"body"},placement:{type:String,default:"top"},trigger:{type:String,default:"hover"}};function g(a,t,o){a&&t&&o&&a.addEventListener(t,o)}function h(a,t,o){a&&t&&a.removeEventListener(t,o)}const H={class:"wb-popup"},I={style:{position:"absolute",top:"0px",left:"0px",width:"100%"}},$=x({name:"WbPopup",__name:"index",props:G,setup(a){const t=a,o=i(),c=i();let u=null;const s=i(!1);function _(e){const n=[];return{add(r,l){r&&(g(e,r,l),n.push(()=>{h(e,r,l)}))},clean(){n.forEach(r=>r==null?void 0:r()),n.length=0}}}function w(){s.value=!0,u.update()}function f(){s.value=!1,u.update()}const y={hover:"mouseenter",focus:"focusin",contextmenu:"contextmenu",click:"click"},k={hover:"mouseleave",focus:"focusout"};R(()=>{u=B(o.value,c.value,{placement:t.placement,modifiers:[{name:"offset",options:{offset:()=>[0,4]}}]});const e=_(o.value);e.clean(),e.add(y[t.trigger],n=>{if(n.type==="contextmenu"&&n.preventDefault(),(n.type==="click"||n.type==="contextmenu")&&s.value){f();return}w()}),e.add(k[t.trigger],()=>{f()})});function d(e){c.value.contains(e.target)||o.value.contains(e.target)||f()}return E(()=>s.value,e=>{if(e){g(document,"mousedown",d);return}h(document,"mousedown",d)}),(e,n)=>(m(),b("div",H,[p("div",{ref_key:"TriggerRef",ref:o},[v(e.$slots,"default")],512),(m(),S(P,{to:t.attach},[p("div",I,[T(p("div",{ref_key:"PopperRef",ref:c,p:"x-2 y-1",bg:"#fff",shadow:"md",rounded:"1"},[v(e.$slots,"content")],512),[[D,s.value]])])],8,["to"]))]))}});export{$ as default};
